<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BD TM MINI BOT</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Monetag -->
  <script src="//libtl.com/sdk.js" data-zone="9842278" data-sdk="show_9842278"></script>

  <style>
    body { font-family: ui-sans-serif, system-ui; }
    .glass { background: rgba(255,255,255,0.08); border:1px solid rgba(255,255,255,0.1); backdrop-filter: blur(12px); border-radius:16px; }
    .tab { display:none; }
    .tab.show { display:block; }
    .bottom { position:fixed; left:0; right:0; bottom:0; padding:10px; background:rgba(0,0,0,0.4); backdrop-filter:blur(6px); }
    .navbtn { width:100%; padding:10px 8px; border-radius:12px; font-weight:700; }
    .badge{padding:2px 6px;border-radius:6px;font-size:.8rem}
    .badge.pending{background:#fbbf24;color:#000}
    .badge.approved{background:#4ade80;color:#000}
    .badge.rejected{background:#f87171;color:#000}
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-[#0b1120] via-[#1e1b4b] to-[#2b0b3a] text-white pb-32">

<header class="p-5 text-center">
  <div class="glass p-4 max-w-xl mx-auto">
    <h1 class="text-3xl font-extrabold">ЁЯТО BD TM MINI BOT</h1>
    <p class="opacity-80 text-sm">ржПржб ржжрзЗржЦрзЗ ржЖрзЯ ржХрж░рзБржи тАв рж░рзЗржлрж╛рж░ ржХрж░рзЗ ржмрзЛржирж╛рж╕ ржкрж╛ржи</p>
    <a href="https://t.me/ADS_EARNING_BD_TM_CHANNEL" target="_blank" class="mt-2 inline-block text-emerald-400 underline">ЁЯУв ржЖржорж╛ржжрзЗрж░ ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржо ржЪрзНржпрж╛ржирзЗрж▓</a>
  </div>
</header>

<main class="px-4 max-w-xl mx-auto space-y-4">
  <!-- Login/Register -->
  <section id="tab-login" class="tab show">
    <div class="glass p-5">
      <h2 class="text-xl font-bold">ЁЯФР ржПржХрж╛ржЙржирзНржЯ ржЪрж╛рж▓рзБ ржХрж░рзБржи</h2>
      <p class="text-sm opacity-80 mt-1">Username (without @) ржУ Telegram Numeric ID ржжрж┐ржиред</p>
      <div class="mt-4 space-y-3">
        <input id="username" class="w-full p-3 rounded text-black" placeholder="Username" />
        <input id="tgId" class="w-full p-3 rounded text-black" placeholder="Telegram ID" />
        <button onclick="register()" class="w-full py-3 bg-emerald-600 rounded-lg font-semibold">ЁЯЪА рж╢рзБрж░рзБ ржХрж░рзБржи</button>
      </div>
    </div>
  </section>

  <!-- Home -->
  <section id="tab-home" class="tab">
    <div class="glass p-5 text-center">
      <div>ржмрж░рзНрждржорж╛ржи ржмрзНржпрж╛рж▓рзЗржирзНрж╕</div>
      <div class="text-4xl font-extrabold mt-1"><span id="ui-balance">0.00</span> рз│</div>
      <div class="mt-2 text-sm opacity-80">ржЖржЬ ржжрзЗржЦрж╛: <span id="ui-ads">0</span> / 100</div>
      <div class="mt-3 flex flex-col gap-3">
        <button onclick="openTab('ads')" class="px-4 py-2 bg-blue-600 rounded-xl font-semibold">тЦ╢ ржПржб ржжрзЗржЦрзБржи</button>
        <button onclick="openTab('withdraw')" class="px-4 py-2 bg-green-600 rounded-xl font-semibold">ЁЯТ│ ржЙржЗржержбрзНрж░</button>
        <div class="text-sm mt-3">
          ЁЯФЧ <b>рж░рзЗржлрж╛рж░ рж▓рж┐ржВржХ:</b><br/>
          <span id="refLink" class="break-all text-emerald-400"></span>
          <button onclick="copyRef()" class="ml-2 text-xs bg-emerald-600 px-2 py-1 rounded">Copy</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Ads -->
  <section id="tab-ads" class="tab">
    <div class="glass p-5 text-center">
      <div class="font-semibold">ржмрж┐ржЬрзНржЮрж╛ржкржи</div>
      <button onclick="startAd()" class="w-full py-3 bg-blue-600 rounded-xl font-bold mt-3">тЦ╢ ржПржЦржиржЗ ржжрзЗржЦрзБржи</button>
      <div id="adTimer" class="mt-3 text-sm opacity-80"></div>
    </div>
  </section>

  <!-- Withdraw -->
  <section id="tab-withdraw" class="tab">
    <div class="glass p-5">
      <h2 class="text-xl font-bold">ЁЯТ│ ржЯрж╛ржХрж╛ ржЙрждрзНрждрзЛрж▓ржи</h2>
      <div class="space-y-3 mt-3">
        <select id="method" class="w-full p-3 rounded text-black">
          <option value="bkash">ржмрж┐ржХрж╛рж╢ (Min 10)</option>
          <option value="nagad">ржиржЧржж (Min 50)</option>
          <option value="recharge">рж░рж┐ржЪрж╛рж░рзНржЬ (Min 20)</option>
        </select>
        <input id="number" class="w-full p-3 rounded text-black" placeholder="ржиржорзНржмрж░" />
        <input id="amount" type="number" class="w-full p-3 rounded text-black" placeholder="ржкрж░рж┐ржорж╛ржг" />
        <button onclick="withdraw()" class="w-full py-3 bg-emerald-600 rounded-xl font-semibold">ЁЯУй рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрж╛ржарж╛ржи</button>
      </div>
    </div>
  </section>

  <!-- History -->
  <section id="tab-history" class="tab">
    <div class="glass p-5">
      <h2 class="text-xl font-bold">ЁЯУЬ рж╣рж┐рж╕рзНржЯрзНрж░рж┐</h2>
      <ul id="withdrawHistory" class="mt-3 space-y-2 text-sm"></ul>
    </div>
  </section>

  <!-- Admin -->
  <section id="tab-admin" class="tab">
    <div class="glass p-5">
      <h2 class="text-xl font-bold">тЪЩ ржПржбржорж┐ржи ржкрзНржпрж╛ржирзЗрж▓</h2>
      <input id="adminPass" type="password" class="w-full p-3 rounded text-black mt-3" placeholder="ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржжрж┐ржи" />
      <button onclick="adminLogin()" class="w-full py-2 bg-blue-600 rounded mt-2">рж▓ржЧржЗржи</button>
      <div id="adminPanel" class="hidden mt-4">
        <h3 class="font-semibold">ржЙржЗржержбрзНрж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ</h3>
        <ul id="adminRequests" class="mt-2 space-y-2 text-sm"></ul>
      </div>
    </div>
  </section>
</main>

<nav class="bottom">
  <div class="max-w-xl mx-auto grid grid-cols-5 gap-2">
    <button class="navbtn bg-white/10" onclick="openTab('home')">ЁЯПа рж╣рзЛржо</button>
    <button class="navbtn bg-white/10" onclick="openTab('ads')">тЦ╢ ржПржб</button>
    <button class="navbtn bg-white/10" onclick="openTab('withdraw')">ЁЯТ│ ржЙржЗржержбрзНрж░</button>
    <button class="navbtn bg-white/10" onclick="openTab('history')">ЁЯУЬ рж╣рж┐рж╕рзНржЯрзНрж░рж┐</button>
    <button class="navbtn bg-white/10" onclick="openTab('admin')">тЪЩ ржПржбржорж┐ржи</button>
  </div>
</nav>

<script>
// === CONFIG ===
const ADMIN_PASSWORD = "Sharif000";
const BOT_TOKEN = "8169503775:AAHFBx2dXbnXLZHje8MUzgsx5chWjxD9dKY";
const ADMIN_CHAT_ID = "7691157254";
const BOT_USERNAME = "BD_TM_MINI_BOT";

// === SESSION ===
let SESSION = JSON.parse(localStorage.getItem("session")) || { username:null, tgId:null, balance:0, ads:0, history:[], requests:[], referred:false };
function saveSession(){ localStorage.setItem("session", JSON.stringify(SESSION)); }

// === HELPERS ===
function openTab(key){
  document.querySelectorAll(".tab").forEach(x=>{x.classList.remove("show");x.style.display="none"});
  const el=document.getElementById("tab-"+key);
  if(el){el.style.display="block";el.classList.add("show")}
}
function fmt(n){return Number(n||0).toFixed(2);}
async function sendTelegram(text){
  try{
    await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`,{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({chat_id:ADMIN_CHAT_ID,text})
    });
  }catch(e){console.log("TG error",e);}
}
function copyRef(){
  navigator.clipboard.writeText(document.getElementById("refLink").innerText);
  alert("рж░рзЗржлрж╛рж░ рж▓рж┐ржВржХ ржХржкрж┐ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ тЬЕ");
}
function updateHistoryUI(){
  const box=document.getElementById("withdrawHistory");
  box.innerHTML="";
  SESSION.history.forEach(h=>{
    const li=document.createElement("li");
    li.className="glass p-2 flex justify-between items-center";
    li.innerHTML=`<div><b>${h.method}</b> ${h.number}<br/>рз│${fmt(h.amount)}</div>
                  <div class="badge ${h.status.toLowerCase()}">${h.status}</div>`;
    box.appendChild(li);
  });
}
function updateAdminUI(){
  const box=document.getElementById("adminRequests");
  box.innerHTML="";
  SESSION.requests.forEach(r=>{
    const li=document.createElement("li");
    li.className="glass p-2";
    li.innerHTML=`<b>${r.username}</b> (${r.tgId})<br/>рз│${r.amount} тЖТ ${r.method} (${r.number})<br/>
      <span class="badge ${r.status.toLowerCase()}">${r.status}</span>
      ${r.status==="Pending" ? `<br/>
        <button onclick="approveReq(${r.id})" class="px-2 py-1 bg-emerald-600 rounded mt-1">Approve</button>
        <button onclick="rejectReq(${r.id})" class="px-2 py-1 bg-rose-600 rounded mt-1">Reject</button>` : ""}`;
    box.appendChild(li);
  });
}

// === LOGIN ===
function register(){
  const username=document.getElementById("username").value.trim();
  const tgId=document.getElementById("tgId").value.trim();
  if(!username||!tgId) return alert("рж╕ржм рждржерзНржп ржжрж┐ржи");
  SESSION.username=username;SESSION.tgId=tgId;
  SESSION.balance=0;SESSION.ads=0;SESSION.history=[];SESSION.requests=[];
  saveSession();
  checkReferral();
  document.getElementById("ui-balance").innerText=fmt(SESSION.balance);
  document.getElementById("ui-ads").innerText=0;
  document.getElementById("refLink").innerText="https://t.me/"+BOT_USERNAME+"?ref="+username;
  openTab("home");
}

// === REFERRAL ===
function checkReferral(){
  const params=new URLSearchParams(window.location.search);
  const ref=params.get("ref");
  if(ref && ref!==SESSION.username && !SESSION.referred){
    SESSION.referred=true;
    sendTelegram(`ЁЯОЙ ржирждрзБржи рж░рзЗржлрж╛рж░!\nReferrer: ${ref}\nNew User: ${SESSION.username}`);
  }
}

// === ADS ===
function startAd(){
  if(!SESSION.username) return openTab("login");
  if(typeof show_9842278==="function"){try{show_9842278();}catch(e){}}
  let left=15;const adTimer=document.getElementById("adTimer");
  adTimer.innerText=`тП│ ржЪрж▓ржЫрзЗ... ${left}s`;
  const t=setInterval(()=>{
    left--;adTimer.innerText=`тП│ ржЪрж▓ржЫрзЗ... ${left}s`;
    if(left<=0){clearInterval(t);completeAd();}
  },1000);
}
function completeAd(){
  SESSION.balance+=0.20;SESSION.ads++;
  saveSession();
  document.getElementById("ui-balance").innerText=fmt(SESSION.balance);
  document.getElementById("ui-ads").innerText=SESSION.ads;
  sendTelegram(`ЁЯСБ ${SESSION.username} (${SESSION.tgId}) ржПржХржЯрж┐ ржПржб ржжрзЗржЦрзЗржЫрзЗред ржорзЛржЯ: ${SESSION.ads}`);
  alert("тЬЕ +0.20 рз│ ржпрзЛржЧ рж╣рзЯрзЗржЫрзЗ!");
}

// === WITHDRAW ===
function withdraw(){
  const method=document.getElementById("method").value;
  const number=document.getElementById("number").value.trim();
  const amount=parseFloat(document.getElementById("amount").value);
  if(!number||!amount) return alert("рж╕ржм рждржерзНржп ржжрж┐ржи");

  // Min check
  if(method==="bkash" && amount<10) return alert("ржмрж┐ржХрж╛рж╢ ржорж┐ржирж┐ржорж╛ржо 10 ржЯрж╛ржХрж╛!");
  if(method==="nagad" && amount<50) return alert("ржиржЧржж ржорж┐ржирж┐ржорж╛ржо 50 ржЯрж╛ржХрж╛!");
  if(method==="recharge" && amount<20) return alert("рж░рж┐ржЪрж╛рж░рзНржЬ ржорж┐ржирж┐ржорж╛ржо 20 ржЯрж╛ржХрж╛!");

  if(amount>SESSION.balance) return alert("ржмрзНржпрж╛рж▓рзЗржирзНрж╕ ржпржерзЗрж╖рзНржЯ ржирзЗржЗ");

  SESSION.balance-=amount;
  const req={id:Date.now(),username:SESSION.username,tgId:SESSION.tgId,method,number,amount,status:"Pending"};
  SESSION.history.push(req);SESSION.requests.push(req);
  saveSession();updateHistoryUI();updateAdminUI();
  document.getElementById("ui-balance").innerText=fmt(SESSION.balance);

  sendTelegram(`ЁЯТ│ ржирждрзБржи ржЙржЗржержбрзНрж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ\nUser: ${SESSION.username} (${SESSION.tgId})\nMethod: ${method}\nNumber: ${number}\nAmount: рз│${amount}`);
  alert("ЁЯУй ржЙржЗржержбрзНрж░ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрж╛ржарж╛ржирзЛ рж╣рзЯрзЗржЫрзЗред");
}

// === ADMIN ===
function adminLogin(){
  const pass=document.getElementById("adminPass").value;
  if(pass!==ADMIN_PASSWORD) return alert("ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржнрзБрж▓!");
  document.getElementById("adminPanel").classList.remove("hidden");
  updateAdminUI();
}
function approveReq(id){
  const r=SESSION.requests.find(x=>x.id===id);
  if(r){r.status="Approved";saveSession();updateAdminUI();updateHistoryUI();sendTelegram(`тЬЕ Approved\n${r.username} (${r.tgId}) рз│${r.amount}`);}
}
function rejectReq(id){
  const r=SESSION.requests.find(x=>x.id===id);
  if(r){r.status="Rejected";SESSION.balance+=r.amount;saveSession();updateAdminUI();updateHistoryUI();sendTelegram(`тЭМ Rejected\n${r.username} (${r.tgId}) рз│${r.amount} ржлрзЗрж░ржд ржжрзЗржУрзЯрж╛ рж╣рж▓рзЛ`);}
}

// === INIT ===
window.onload=()=>{
  if(SESSION.username){
    document.getElementById("ui-balance").innerText=fmt(SESSION.balance);
    document.getElementById("ui-ads").innerText=SESSION.ads;
    document.getElementById("refLink").innerText="https://t.me/"+BOT_USERNAME+"?ref="+SESSION.username;
    updateHistoryUI();updateAdminUI();openTab("home");
  }else openTab("login");
};
</script>
</body>
</html>