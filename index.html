<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BD TM MINI BOT</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Monetag SDK (ржПржб ржкржкржЖржк) -->
  <script src="//libtl.com/sdk.js" data-zone="9842278" data-sdk="show_9842278"></script>

  <style>
    .glass{
      background: rgba(255,255,255,.08);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255,255,255,.2);
      border-radius: 1.25rem;
      box-shadow: 0 8px 30px rgba(0,0,0,.35), 0 0 24px rgba(0,255,255,.25);
      transition: transform .25s ease, box-shadow .25s ease;
    }
    .glass:hover{ transform: translateY(-2px); box-shadow: 0 12px 34px rgba(0,0,0,.4), 0 0 36px rgba(0,255,255,.45); }
    .glow-text{
      background: linear-gradient(90deg,#00f2fe,#4facfe);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      text-shadow: 0 0 28px rgba(79,172,254,.95);
    }
    button{ transition: all .22s ease-in-out; }
    button:hover{ transform: scale(1.05); }
    .badge{ font-size:.75rem; padding:.125rem .5rem; border-radius:.5rem; }
  </style>
</head>
<body class="bg-gradient-to-r from-blue-900 to-purple-900 min-h-screen text-white">

  <!-- Header -->
  <section class="w-full text-center pt-10">
    <h1 class="text-4xl md:text-5xl font-extrabold glow-text">ЁЯТО BD TM MINI BOT</h1>
    <p class="opacity-90 mt-2">ржмрж┐ржЬрзНржЮрж╛ржкржи ржжрзЗржЦрзБржи тАв рж░рзЗржлрж╛рж░ ржХрж░рзБржи тАв ржЖрзЯ ржХрж░рзБржи</p>
  </section>

  <!-- Join Channel -->
  <section class="glass mt-6 p-6 w-11/12 max-w-lg mx-auto text-center">
    <a href="https://t.me/ADS_EARNING_BD_TM_CHANNEL" target="_blank"
       class="inline-block px-8 py-3 bg-green-500 hover:bg-green-600 rounded-xl font-bold shadow-lg">
      ЁЯУв ржЖржорж╛ржжрзЗрж░ ржЕржлрж┐рж╕рж┐рзЯрж╛рж▓ ржЪрзНржпрж╛ржирзЗрж▓рзЗ ржпрзЛржЧ ржжрж┐ржи
    </a>
  </section>

  <!-- Balance + Daily Limit -->
  <section class="glass mt-6 p-6 w-11/12 max-w-lg mx-auto text-center">
    <p class="text-xl font-semibold">ржмрзНржпрж╛рж▓рзЗржирзНрж╕: <span id="balance">рзж.рзжрзж</span> ржЯрж╛ржХрж╛</p>
    <p class="text-sm mt-2 opacity-90">
      ЁЯОп ржЖржЬ ржжрзЗржЦрж╛ ржмрж┐ржЬрзНржЮрж╛ржкржи: <span id="adsCount">0</span> / 100
      <span id="resetInfo" class="ml-2 badge bg-cyan-500/20">ржкрзНрж░рждрж┐ржжрж┐ржи рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ рж░рж┐рж╕рзЗржЯ</span>
    </p>
    <div class="w-full bg-white/20 rounded-full h-3 mt-3">
      <div id="progressBar" class="bg-cyan-400 h-3 rounded-full transition-all" style="width:0%"></div>
    </div>
  </section>

  <!-- Ads Section -->
  <section class="glass mt-6 p-6 w-11/12 max-w-lg mx-auto text-center">
    <h2 class="text-2xl font-bold mb-3">тЦ╢ ржмрж┐ржЬрзНржЮрж╛ржкржи ржжрзЗржЦрзБржи</h2>
    <p id="adTimer" class="text-sm opacity-90 mb-3">ржкрзНрж░рждрж┐ ржмрж┐ржЬрзНржЮрж╛ржкржи рззрзл рж╕рзЗржХрзЗржирзНржб тАв рж╕ржорзНржкрзВрж░рзНржг ржжрзЗржЦрж▓рзЗ рзж.рзирзж ржЯрж╛ржХрж╛</p>
    <button id="watchBtn" onclick="showAd()"
            class="px-8 py-3 bg-blue-600 rounded-xl font-bold animate-pulse">
      ржПржЦржиржЗ ржмрж┐ржЬрзНржЮрж╛ржкржи ржжрзЗржЦрзБржи
    </button>
  </section>

  <!-- Withdraw Section -->
  <section class="glass mt-6 p-6 w-11/12 max-w-lg mx-auto text-center">
    <h2 class="text-2xl font-bold mb-4">ЁЯТ│ ржЯрж╛ржХрж╛ ржЙрждрзНрждрзЛрж▓ржи</h2>
    <input id="bkashNumber" type="text" placeholder="ржмрж┐ржХрж╛рж╢ ржиржорзНржмрж░ рж▓рж┐ржЦрзБржи"
           class="w-full p-3 rounded text-black mb-3 border-2 border-cyan-400"/>
    <input id="amount" type="number" placeholder="ржкрж░рж┐ржорж╛ржг (рж╕рж░рзНржмржирж┐ржорзНржи рззрзж)"
           class="w-full p-3 rounded text-black mb-3 border-2 border-cyan-400"/>
    <button onclick="submitWithdraw()" class="px-6 py-3 bg-yellow-400 text-black font-bold rounded-xl">
      ржЙрждрзНрждрзЛрж▓ржирзЗрж░ ржЕржирзБрж░рзЛржз ржкрж╛ржарж╛ржи
    </button>
    <p class="text-xs opacity-80 mt-2">тЪа рж╕рж░рзНржмржирж┐ржорзНржи ржЙрждрзНрждрзЛрж▓ржи рззрзж ржЯрж╛ржХрж╛ред</p>
  </section>

  <!-- History Section -->
  <section class="glass mt-6 p-6 w-11/12 max-w-lg mx-auto">
    <h2 class="text-2xl font-bold mb-4 text-center">ЁЯУЬ ржЙрждрзНрждрзЛрж▓ржи ржЗрждрж┐рж╣рж╛рж╕</h2>
    <ul id="historyList" class="space-y-2 text-sm max-h-56 overflow-y-auto"></ul>
  </section>

  <!-- Refer Section -->
  <section class="glass mt-6 p-6 w-11/12 max-w-lg mx-auto text-center">
    <h2 class="text-2xl font-bold mb-4">ЁЯОБ рж░рзЗржлрж╛рж░ ржХрж░рзЗ ржЖрзЯ ржХрж░рзБржи</h2>
    <button onclick="copyRefer()" class="px-6 py-3 bg-pink-600 rounded-xl font-bold">
      ЁЯОп рж░рзЗржлрж╛рж░ рж▓рж┐ржВржХ ржХржкрж┐ ржХрж░рзБржи
    </button>
  </section>

  <!-- Admin Section -->
  <section class="glass mt-6 p-6 w-11/12 max-w-lg mx-auto text-center mb-10">
    <h2 class="text-2xl font-bold mb-4">ЁЯСС ржЕрзНржпрж╛ржбржорж┐ржи ржкрзНржпрж╛ржирзЗрж▓</h2>
    <div id="adminLoginBox" class="mb-4">
      <input id="adminPass" type="password" placeholder="ржЕрзНржпрж╛ржбржорж┐ржи ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржжрж┐ржи"
             class="w-full p-3 rounded text-black mb-3 border-2 border-green-400"/>
      <button onclick="checkAdmin()" class="px-6 py-3 bg-green-600 rounded-xl font-bold">рж▓ржЧржЗржи</button>
      <p class="text-xs opacity-80 mt-2">ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб: <span class="select-all">Sharif000</span></p>
    </div>
    <div id="adminPanel" class="hidden text-left">
      <h3 class="text-xl font-bold mb-2">тП│ ржкрзЗржирзНржбрж┐ржВ ржЙрждрзНрждрзЛрж▓ржирзЗрж░ ржЕржирзБрж░рзЛржз</h3>
      <ul id="adminRequests" class="space-y-2 text-sm"></ul>
    </div>
  </section>

  <script>
    /* ========= ржХржиржлрж┐ржЧ ========= */
    const AD_SECONDS = 15;                // ржкрзНрж░рждрж┐ ржмрж┐ржЬрзНржЮрж╛ржкржирзЗрж░ рж╕ржорзЯ (рж╕рзЗржХрзЗржирзНржб)
    const REWARD_PER_AD = 0.20;           // ржкрзНрж░рждрж┐ ржмрж┐ржЬрзНржЮрж╛ржкржирзЗ ржЖрзЯ
    const DAILY_LIMIT = 100;              // ржжрзИржирж┐ржХ рж╕рж░рзНржмрзЛржЪрзНржЪ ржмрж┐ржЬрзНржЮрж╛ржкржи
    const MIN_WITHDRAW = 10;              // рж╕рж░рзНржмржирж┐ржорзНржи ржЙрждрзНрждрзЛрж▓ржи
    const BOT_TOKEN = "8169503775:AAHFBx2dXbnXLZHje8MUzgsx5chWjxD9dKY";
    const ADMIN_ID  = "7691157254";

    /* ========= рж╕рзНржЯрзЗржЯ ========= */
    let state = {
      balance: 0,
      ads: { date: "", count: 0 },
      withdraws: [] // {id, number, amount, status: 'Pending'|'Accepted'|'Rejected', time}
    };

    /* ========= Utils ========= */
    const fmt = n => n.toLocaleString("bn-BD", {minimumFractionDigits:2, maximumFractionDigits:2});
    const todayKey = () => new Date().toISOString().slice(0,10);
    const save = () => localStorage.setItem("bdtm_state", JSON.stringify(state));
    const load = () => {
      const raw = localStorage.getItem("bdtm_state");
      if(raw){
        try { state = JSON.parse(raw); } catch(e){}
      }
      // daily reset
      if(state.ads.date !== todayKey()){
        state.ads.date = todayKey();
        state.ads.count = 0;
      }
    };

    function renderBalance(){
      document.getElementById("balance").innerText = fmt(state.balance);
      document.getElementById("adsCount").innerText = state.ads.count;
      const percent = Math.min(100, (state.ads.count/DAILY_LIMIT)*100);
      document.getElementById("progressBar").style.width = percent + "%";
    }

    function renderHistory(){
      const ul = document.getElementById("historyList");
      ul.innerHTML = "";
      if(state.withdraws.length === 0){
        ul.innerHTML = `<li class="opacity-80">ржХрзЛржирзЛ ржЗрждрж┐рж╣рж╛рж╕ ржирзЗржЗред</li>`;
        return;
      }
      state.withdraws.slice().reverse().forEach(w=>{
        const li = document.createElement("li");
        const color = w.status==="Accepted" ? "bg-green-500/20" :
                      w.status==="Rejected" ? "bg-red-500/20" : "bg-yellow-500/20";
        li.className = `glass ${color} p-3 rounded-lg`;
        li.innerHTML = `
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1">
            <div>
              <span class="badge bg-white/20">ID: ${w.id}</span>
              <span class="ml-2">рз│${fmt(w.amount)} тЮЬ ${w.number}</span>
            </div>
            <div>
              <span class="badge ${w.status==='Accepted'?'bg-green-600/60':w.status==='Rejected'?'bg-red-600/60':'bg-yellow-600/60'}">
                ${w.status==='Accepted'?'тЬЕ ржЕржирзБржорзЛржжрж┐ржд':w.status==='Rejected'?'тЭМ ржмрж╛рждрж┐рж▓':'тП│ ржкрзЗржирзНржбрж┐ржВ'}
              </span>
            </div>
          </div>
          <div class="text-xs opacity-80 mt-1">рж╕ржоржпрж╝: ${new Date(w.time).toLocaleString('bn-BD')}</div>
        `;
        ul.appendChild(li);
      });
    }

    function renderAdminList(){
      const ul = document.getElementById("adminRequests");
      ul.innerHTML = "";
      const pending = state.withdraws.filter(w=>w.status==="Pending");
      if(pending.length===0){
        ul.innerHTML = `<li class="opacity-80">ржмрж░рзНрждржорж╛ржирзЗ ржХрзЛржирзЛ ржкрзЗржирзНржбрж┐ржВ ржЕржирзБрж░рзЛржз ржирзЗржЗред</li>`;
        return;
      }
      pending.slice().reverse().forEach(w=>{
        const li = document.createElement("li");
        li.className = "glass p-3 rounded-lg";
        li.innerHTML = `
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
            <div>
              <span class="badge bg-white/20">ID: ${w.id}</span>
              <span class="ml-2">рз│${fmt(w.amount)} тЮЬ ${w.number}</span>
            </div>
            <div class="flex gap-2">
              <button class="px-3 py-1 bg-green-600 rounded" onclick="adminApprove('${w.id}')">ржЕржирзБржорзЛржжржи</button>
              <button class="px-3 py-1 bg-red-600 rounded" onclick="adminReject('${w.id}')">ржмрж╛рждрж┐рж▓</button>
            </div>
          </div>
        `;
        ul.appendChild(li);
      });
    }

    function notifyAdmin(text){
      const msg = encodeURIComponent(text);
      fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${ADMIN_ID}&text=${msg}`)
        .catch(()=>{}); // ржмрзНржпрж░рзНрже рж╣рж▓рзЗржУ UI ржерж╛ржорж╛ржмрзЛ ржирж╛
    }

    /* ========= Ads ========= */
    function showAd(){
      if(state.ads.count >= DAILY_LIMIT){
        alert("тЪа ржЖржЬржХрзЗрж░ рж▓рж┐ржорж┐ржЯ ржкрзВрж░рзНржг рж╣рзЯрзЗржЫрзЗ (рззрзжрзж)ред");
        return;
      }
      if(typeof show_9842278 === "function"){
        show_9842278(); // Monetag popup
      }else{
        alert("тЪа ржмрж┐ржЬрзНржЮрж╛ржкржи ржПржЦржирзЛ рж▓рзЛржб рж╣рзЯржирж┐, ржПржХржЯрзБ ржкрж░рзЗ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред");
        return;
      }

      let left = AD_SECONDS;
      const btn = document.getElementById("watchBtn");
      const timer = document.getElementById("adTimer");
      btn.disabled = true; btn.classList.remove("animate-pulse");
      const t = setInterval(()=>{
        timer.innerText = `тП│ ${left} рж╕рзЗржХрзЗржирзНржб ржЪрж▓ржЫрзЗ...`;
        left--;
        if(left < 0){
          clearInterval(t);
          // рж░рж┐ржУрзЯрж╛рж░рзНржб
          state.ads.count += 1;
          state.balance = +(state.balance + REWARD_PER_AD).toFixed(2);
          save(); renderBalance();
          timer.innerText = "тЬЕ ржмрж┐ржЬрзНржЮрж╛ржкржи рж╕ржорзНржкрзВрж░рзНржг ржжрзЗржЦрзЗржЫрзЗржи! +рзж.рзирзж ржЯрж╛ржХрж╛ ржпрзБржХрзНржд рж╣ржпрж╝рзЗржЫрзЗред";
          alert("тЬЕ ржмрж┐ржЬрзНржЮрж╛ржкржи рж╕ржорзНржкрзВрж░рзНржг ржжрзЗржЦрзЗржЫрзЗржи! +рзж.рзирзж ржЯрж╛ржХрж╛ ржпрзБржХрзНржд рж╣ржпрж╝рзЗржЫрзЗред");
          btn.disabled = false; btn.classList.add("animate-pulse");
        }
      }, 1000);
    }

    /* ========= Withdraw ========= */
    function submitWithdraw(){
      const number = document.getElementById("bkashNumber").value.trim();
      const amount = parseFloat(document.getElementById("amount").value);
      if(!number || isNaN(amount)){
        alert("тЪа рж╕ржарж┐ржХржнрж╛ржмрзЗ ржмрж┐ржХрж╛рж╢ ржиржорзНржмрж░ ржУ ржкрж░рж┐ржорж╛ржг рж▓рж┐ржЦрзБржиред");
        return;
      }
      if(amount < MIN_WITHDRAW){
        alert(`тЪа рж╕рж░рзНржмржирж┐ржорзНржи ржЙрждрзНрждрзЛрж▓ржи ${MIN_WITHDRAW} ржЯрж╛ржХрж╛ред`);
        return;
      }
      if(amount > state.balance){
        alert("тЪа ржкрж░рзНржпрж╛ржкрзНржд ржмрзНржпрж╛рж▓рзЗржирзНрж╕ ржирзЗржЗред");
        return;
      }

      state.balance = +(state.balance - amount).toFixed(2);
      const req = {
        id: Date.now().toString(),
        number, amount, status: "Pending",
        time: new Date().toISOString()
      };
      state.withdraws.push(req);
      save();
      renderBalance();
      renderHistory();
      // ржЕрзНржпрж╛ржбржорж┐ржи рждрж╛рж▓рж┐ржХрж╛ рж▓ржЧржЗржирзЗрж░ ржкрж░ ржжрзЗржЦрж╛ржмрзЗ, рждржмрзЗ ржбрзЗржЯрж╛ рж╕рзЗржн ржЖржЫрзЗ

      // ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи (ржЗржЙржЬрж╛рж░ + ржЕрзНржпрж╛ржбржорж┐ржи)
      alert("ЁЯУй ржЖржкржирж╛рж░ ржЙрждрзНрждрзЛрж▓ржирзЗрж░ ржЕржирзБрж░рзЛржз ржкрж╛ржарж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗред ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзБржиред");
      notifyAdmin(
        `ЁЯУй ржирждрзБржи ржЙрждрзНрждрзЛрж▓ржирзЗрж░ ржЕржирзБрж░рзЛржз\nID: ${req.id}\nржкрж░рж┐ржорж╛ржг: рз│${fmt(req.amount)}\nржмрж┐ржХрж╛рж╢: ${req.number}`
      );
    }

    /* ========= Admin ========= */
    function checkAdmin(){
      const pass = document.getElementById("adminPass").value;
      if(pass === "Sharif000"){
        document.getElementById("adminLoginBox").classList.add("hidden");
        document.getElementById("adminPanel").classList.remove("hidden");
        renderAdminList();
        alert("тЬЕ ржЕрзНржпрж╛ржбржорж┐ржи рж▓ржЧржЗржи рж╕ржлрж▓ред");
      }else{
        alert("тЭМ ржнрзБрж▓ ржкрж╛рж╕ржУрзЯрж╛рж░рзНржбред");
      }
    }

    function updateWithdrawStatus(id, status){
      const w = state.withdraws.find(x=>x.id===id);
      if(!w) return;
      w.status = status;
      save();
      renderHistory();
      renderAdminList();
    }

    function adminApprove(id){
      updateWithdrawStatus(id, "Accepted");
      notifyAdmin(`тЬЕ ржЙрждрзНрждрзЛрж▓ржи ржЕржирзБржорзЛржжрж┐ржд\nID: ${id}`);
      alert("тЬЕ ржЕржирзБрж░рзЛржз ржЕржирзБржорзЛржжрж┐ржд рж╣рзЯрзЗржЫрзЗред");
    }

    function adminReject(id){
      updateWithdrawStatus(id, "Rejected");
      notifyAdmin(`тЭМ ржЙрждрзНрждрзЛрж▓ржи ржмрж╛рждрж┐рж▓\nID: ${id}`);
      alert("тЭМ ржЕржирзБрж░рзЛржз ржмрж╛рждрж┐рж▓ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред");
    }

    /* ========= Refer ========= */
    function copyRefer(){
      const referLink = "https://t.me/BD_TM_MINI_BOT";
      navigator.clipboard.writeText(referLink).then(()=>{
        alert("тЬЕ рж░рзЗржлрж╛рж░ рж▓рж┐ржВржХ ржХржкрж┐ рж╣рзЯрзЗржЫрзЗ!");
      });
    }

    /* ========= Init ========= */
    (function init(){
      load();
      renderBalance();
      renderHistory();
      // ржжрж┐ржи ржмржжрж▓рж╛рж▓рзЗ UI-рждрзЗ ржжрзЗржЦрж╛ржУ
      document.getElementById("resetInfo").title = `ржЖржЬржХрзЗрж░ рждрж╛рж░рж┐ржЦ: ${new Date().toLocaleDateString('bn-BD')} тАв рззрзи ржЯрж╛рзЯ рж╕рзНржмрзЯржВржХрзНрж░рж┐рзЯржнрж╛ржмрзЗ рж░рж┐рж╕рзЗржЯ рж╣ржмрзЗ ржирж╛; ржкрж░рзЗрж░ ржжрж┐ржи ржкрзНрж░ржержо ржУржкрзЗржирзЗрж░ рж╕ржорзЯ рж░рж┐рж╕рзЗржЯ рж╣ржмрзЗред`;
    })();
  </script>
</body>
        </html>
